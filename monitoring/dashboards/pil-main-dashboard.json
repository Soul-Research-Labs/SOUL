{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      },
      {
        "datasource": "Prometheus",
        "enable": true,
        "expr": "pil_deployment_event{chain=\"$chain\"}",
        "iconColor": "#96D98D",
        "name": "Deployments",
        "titleFormat": "Deployment"
      }
    ]
  },
  "description": "Privacy Interoperability Layer - Main Operations Dashboard",
  "editable": true,
  "gnetId": null,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "title": "Overview",
      "type": "row",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }
    },
    {
      "title": "Total Value Locked",
      "type": "stat",
      "datasource": "Prometheus",
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 1 },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": ["lastNotNull"],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "currencyUSD",
          "decimals": 2,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "red", "value": null },
              { "color": "yellow", "value": 100000 },
              { "color": "green", "value": 1000000 }
            ]
          }
        }
      },
      "targets": [
        {
          "expr": "sum(pil_tvl_usd{chain=~\"$chain\"})",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Active Users (24h)",
      "type": "stat",
      "datasource": "Prometheus",
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 1 },
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "orientation": "auto"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "red", "value": null },
              { "color": "yellow", "value": 100 },
              { "color": "green", "value": 500 }
            ]
          }
        }
      },
      "targets": [
        {
          "expr": "count(count by (sender) (pil_transaction_total{chain=~\"$chain\"}[24h]))",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Cross-Chain Transfers (24h)",
      "type": "stat",
      "datasource": "Prometheus",
      "gridPos": { "h": 4, "w": 6, "x": 12, "y": 1 },
      "options": {
        "colorMode": "value",
        "graphMode": "area"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "blue", "value": null }
            ]
          }
        }
      },
      "targets": [
        {
          "expr": "sum(increase(pil_bridge_transfers_total[24h]))",
          "refId": "A"
        }
      ]
    },
    {
      "title": "PQC Enabled Accounts",
      "type": "stat",
      "datasource": "Prometheus",
      "gridPos": { "h": 4, "w": 6, "x": 18, "y": 1 },
      "options": {
        "colorMode": "value",
        "graphMode": "area"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "purple", "value": null }
            ]
          }
        }
      },
      "targets": [
        {
          "expr": "pil_pqc_accounts_total{chain=~\"$chain\"}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Transaction Volume",
      "type": "row",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 5 }
    },
    {
      "title": "Transactions per Hour",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 6 },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "fillOpacity": 20
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      },
      "targets": [
        {
          "expr": "sum(rate(pil_transaction_total{chain=~\"$chain\"}[1h])) by (type)",
          "legendFormat": "{{type}}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Gas Usage by Function",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 6 },
      "fieldConfig": {
        "defaults": {
          "unit": "gas",
          "custom": {
            "drawStyle": "bars",
            "fillOpacity": 80
          }
        }
      },
      "targets": [
        {
          "expr": "avg(pil_gas_used{chain=~\"$chain\"}) by (function)",
          "legendFormat": "{{function}}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Post-Quantum Cryptography",
      "type": "row",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 14 }
    },
    {
      "title": "PQC Verifications",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 15 },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "smooth"
          }
        }
      },
      "targets": [
        {
          "expr": "rate(pil_pqc_verifications_total{chain=~\"$chain\"}[5m])",
          "legendFormat": "{{algorithm}}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "PQC Algorithm Distribution",
      "type": "piechart",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 15 },
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "right",
          "values": ["value", "percent"]
        },
        "pieType": "donut"
      },
      "targets": [
        {
          "expr": "sum(pil_pqc_accounts_by_algorithm{chain=~\"$chain\"}) by (algorithm)",
          "legendFormat": "{{algorithm}}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Hybrid Signature Usage",
      "type": "gauge",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 15 },
      "options": {
        "orientation": "auto",
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit",
          "min": 0,
          "max": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "red", "value": null },
              { "color": "yellow", "value": 0.3 },
              { "color": "green", "value": 0.7 }
            ]
          }
        }
      },
      "targets": [
        {
          "expr": "pil_hybrid_signatures_ratio{chain=~\"$chain\"}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Cross-Chain Bridges",
      "type": "row",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 23 }
    },
    {
      "title": "Bridge Transfer Volume",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 24 },
      "fieldConfig": {
        "defaults": {
          "unit": "currencyUSD",
          "custom": {
            "drawStyle": "bars",
            "fillOpacity": 60
          }
        }
      },
      "targets": [
        {
          "expr": "sum(rate(pil_bridge_volume_usd[1h])) by (source_chain, dest_chain)",
          "legendFormat": "{{source_chain}} â†’ {{dest_chain}}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Bridge Latency",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 24 },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "smooth"
          }
        }
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.95, rate(pil_bridge_latency_seconds_bucket[5m]))",
          "legendFormat": "p95 Latency",
          "refId": "A"
        },
        {
          "expr": "histogram_quantile(0.50, rate(pil_bridge_latency_seconds_bucket[5m]))",
          "legendFormat": "p50 Latency",
          "refId": "B"
        }
      ]
    },
    {
      "title": "Zero-Knowledge Proofs",
      "type": "row",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 32 }
    },
    {
      "title": "Proof Generations",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 33 },
      "targets": [
        {
          "expr": "rate(pil_proof_generations_total[5m])",
          "legendFormat": "{{proof_type}}",
          "refId": "A"
        }
      ]
    },
    {
      "title": "Proof Verification Time",
      "type": "timeseries",
      "datasource": "Prometheus",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 33 },
      "fieldConfig": {
        "defaults": {
          "unit": "ms"
        }
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.99, rate(pil_proof_verification_ms_bucket[5m]))",
          "legendFormat": "p99",
          "refId": "A"
        }
      ]
    },
    {
      "title": "System Health",
      "type": "row",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 41 }
    },
    {
      "title": "Contract Health",
      "type": "table",
      "datasource": "Prometheus",
      "gridPos": { "h": 6, "w": 24, "x": 0, "y": 42 },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "left"
          }
        },
        "overrides": [
          {
            "matcher": { "id": "byName", "options": "Status" },
            "properties": [
              {
                "id": "mappings",
                "value": [
                  { "options": { "1": { "color": "green", "text": "Healthy" } }, "type": "value" },
                  { "options": { "0": { "color": "red", "text": "Unhealthy" } }, "type": "value" }
                ]
              }
            ]
          }
        ]
      },
      "targets": [
        {
          "expr": "pil_contract_health{chain=~\"$chain\"}",
          "format": "table",
          "refId": "A"
        }
      ],
      "transformations": [
        {
          "id": "organize",
          "options": {
            "includeByName": {
              "contract": true,
              "chain": true,
              "Value": true
            },
            "renameByName": {
              "Value": "Status"
            }
          }
        }
      ]
    }
  ],
  "refresh": "30s",
  "schemaVersion": 30,
  "style": "dark",
  "tags": ["pil", "privacy", "cross-chain", "pqc"],
  "templating": {
    "list": [
      {
        "name": "chain",
        "type": "query",
        "datasource": "Prometheus",
        "query": "label_values(pil_transaction_total, chain)",
        "refresh": 1,
        "includeAll": true,
        "multi": true,
        "current": {
          "text": "All",
          "value": "$__all"
        }
      }
    ]
  },
  "time": {
    "from": "now-24h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h"]
  },
  "title": "PIL - Main Dashboard",
  "uid": "pil-main-dashboard",
  "version": 1
}
