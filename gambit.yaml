# Mutation Testing Configuration for PIL
# Uses Gambit for Solidity mutation testing

# Gambit Configuration
# Install: pip install gambit-sol
# Run: gambit mutate --config gambit.yaml

version: "1.0"

# Project settings
project:
  name: "Privacy Interoperability Layer"
  source_root: "./contracts"
  
# Solidity compiler settings
solc:
  version: "0.8.22"
  remappings:
    - "@openzeppelin/=node_modules/@openzeppelin/"
  optimizer:
    enabled: true
    runs: 200

# Target contracts for mutation testing
targets:
  - path: "core/ConfidentialStateContainerV3.sol"
    contract: "ConfidentialStateContainerV3"
    
  - path: "core/NullifierRegistryV3.sol"
    contract: "NullifierRegistryV3"
    
  - path: "primitives/ZKBoundStateLocks.sol"
    contract: "ZKBoundStateLocks"
    
  - path: "bridge/PILAtomicSwapV2.sol"
    contract: "PILAtomicSwapV2"

# Mutation operators to apply
mutation_operators:
  # Arithmetic operators
  - aor  # Arithmetic Operator Replacement (+, -, *, /)
  - uor  # Unary Operator Replacement (++, --, !)
  
  # Relational operators
  - ror  # Relational Operator Replacement (<, >, <=, >=, ==, !=)
  - lcr  # Logical Connector Replacement (&&, ||)
  
  # Literal mutations
  - lvr  # Literal Value Replacement (numbers, booleans)
  
  # Statement mutations
  - ssr  # Statement Skip Replacement (remove statements)
  - scr  # Statement Comment Replacement
  
  # Function mutations
  - fvr  # Function Visibility Replacement
  - mvr  # Modifier Value Replacement
  
  # Solidity-specific
  - rrr  # Require/Revert Replacement
  - err  # Emit Removal

# Excluded patterns (don't mutate these)
exclude:
  - "**/test/**"
  - "**/mocks/**"
  - "**/interfaces/**"
  - "**/*.t.sol"

# Output settings
output:
  directory: "./mutants"
  format: "json"
  
# Test command to run against mutants
test:
  command: "npm test"
  timeout: 300  # 5 minutes per mutant
  
# Reporting
report:
  format: "html"
  output: "./reports/mutation-report.html"
